<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CLI reference</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.54d80d9b.css" as="style"><link rel="preload" href="/assets/js/app.b07357c6.js" as="script"><link rel="preload" href="/assets/js/2.11174f41.js" as="script"><link rel="preload" href="/assets/js/20.bcf4e4cb.js" as="script"><link rel="prefetch" href="/assets/js/10.b253edbe.js"><link rel="prefetch" href="/assets/js/11.422a04cc.js"><link rel="prefetch" href="/assets/js/12.ec296e32.js"><link rel="prefetch" href="/assets/js/13.94198388.js"><link rel="prefetch" href="/assets/js/14.9957d544.js"><link rel="prefetch" href="/assets/js/15.30b921e2.js"><link rel="prefetch" href="/assets/js/16.021537f8.js"><link rel="prefetch" href="/assets/js/17.89c23169.js"><link rel="prefetch" href="/assets/js/18.9e3edfeb.js"><link rel="prefetch" href="/assets/js/19.81e48175.js"><link rel="prefetch" href="/assets/js/21.76329c4a.js"><link rel="prefetch" href="/assets/js/3.bb629bc1.js"><link rel="prefetch" href="/assets/js/4.4dc5086f.js"><link rel="prefetch" href="/assets/js/5.06420f4a.js"><link rel="prefetch" href="/assets/js/6.58e44b89.js"><link rel="prefetch" href="/assets/js/7.055367f9.js"><link rel="prefetch" href="/assets/js/8.61820209.js"><link rel="prefetch" href="/assets/js/9.678f52b2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.54d80d9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/digger-logo-text.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/overview/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/overview/how-it-works.html" class="sidebar-link">How It Works</a></li><li><a href="/overview/digger-vs-other.html" class="sidebar-link">Digger vs Other</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Get Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getting-started/installation.html" class="sidebar-link">Install Digger CLI</a></li><li><a href="/getting-started/node-express.html" class="sidebar-link">Run a Node.js app</a></li><li><a href="/getting-started/django.html" class="sidebar-link">Run a Django app</a></li><li><a href="/getting-started/secrets.html" class="sidebar-link">Secrets</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Customize</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/customize/terraform.html" class="sidebar-link">Write your own Terraform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/terraform.html#terraform-overrides" class="sidebar-link">Terraform overrides</a></li><li class="sidebar-sub-header"><a href="/customize/terraform.html#custom-target" class="sidebar-link">Custom Target</a></li></ul></li><li><a href="/customize/cicd.html" class="sidebar-link">CI/CD Integrations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/cicd.html#github-actions" class="sidebar-link">Github Actions</a></li><li class="sidebar-sub-header"><a href="/customize/cicd.html#gitlab-ci" class="sidebar-link">Gitlab CI</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-cli.html" aria-current="page" class="active sidebar-link">CLI reference</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-auth" class="sidebar-link">dg auth</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-project-init" class="sidebar-link">dg project init</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-sync" class="sidebar-link">dg sync</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-service-add" class="sidebar-link">dg service add</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-build-env-name" class="sidebar-link">dg env build env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-push-env-name" class="sidebar-link">dg env push env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-release-env-name" class="sidebar-link">dg env release env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-create-env-name" class="sidebar-link">dg env create env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-plan-env-name" class="sidebar-link">dg env plan env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-apply-env-name" class="sidebar-link">dg env apply env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-update-env-name" class="sidebar-link">dg env update env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-destroy-env-name" class="sidebar-link">dg env destroy env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-describe-env-name" class="sidebar-link">dg env describe env_name</a></li><li class="sidebar-sub-header"><a href="/reference-cli.html#dg-env-list" class="sidebar-link">dg env list</a></li></ul></li><li><a href="/reference-yaml.html" class="sidebar-link">digger.yml reference</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reference-yaml.html#structure" class="sidebar-link">Structure</a></li><li class="sidebar-sub-header"><a href="/reference-yaml.html#defining-resource-dependencies" class="sidebar-link">Defining Resource dependencies</a></li><li class="sidebar-sub-header"><a href="/reference-yaml.html#using-existing-resources" class="sidebar-link">Using existing resources</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/misc/tagging-and-rollbacks.html" class="sidebar-link">Image tagging rollbacks</a></li><li><a href="/misc/composing-terraform-templates.html" class="sidebar-link">Terraform Templates</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cli-reference"><a href="#cli-reference" class="header-anchor">#</a> CLI reference</h1> <p>Did you know that our CLI is open source? You can contribute <a href="https://github.com/diggerhq/cli" target="_blank" rel="noopener noreferrer">bug reports and feature requests on github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>API is subject to change in future versions of the CLI.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Almost all commands are run in the context of digger.yml. This is used to identify the project name and services for this project. The state of services however is maintained in the backend. We can sync the services of a project with <code>dg sync</code> command. The expected context for each command is highlighted under each heading.</p></div> <h2 id="dg-auth"><a href="#dg-auth" class="header-anchor">#</a> dg auth</h2> <ul><li>Requires Auth: no</li> <li>Context: N/A</li></ul> <p>Authenticate and retrieve Digger token. This command open browser for authentication.</p> <h2 id="dg-project-init"><a href="#dg-project-init" class="header-anchor">#</a> dg project init</h2> <ul><li>Requires Auth: yes</li> <li>Context: Project root (initialises digger.yml)</li></ul> <p>Initialize a project by name (creates entry in backend). Also creates initial digger.yml file.</p> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--name</code></td> <td>The project name. if not entered you will be asked to enter it as input.</td> <td>No</td></tr></tbody></table> <h2 id="dg-sync"><a href="#dg-sync" class="header-anchor">#</a> dg sync</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Sync services from digger.yml to backend.</p> <h2 id="dg-service-add"><a href="#dg-service-add" class="header-anchor">#</a> dg service add</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Helper to add a service to digger.yml. Will ask you for the path to the service and then guess the details of this service in digger.yml.</p> <h2 id="dg-env-build-env-name"><a href="#dg-env-build-env-name" class="header-anchor">#</a> dg env build env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--service</code></td> <td>The name of the service. <br><br>This needs to be present in the digger.yml <code>services</code> section</td> <td>No</td></tr> <tr><td><code>--tag</code></td> <td>The tag of the image to be built - default to 'latest'</td> <td>No</td></tr> <tr><td><code>--context</code></td> <td>For docker container builds. The context of the docker build.<br><br> Defaults to the location of the Dockerfile</td> <td>No</td></tr></tbody></table> <h2 id="dg-env-push-env-name"><a href="#dg-env-push-env-name" class="header-anchor">#</a> dg env push env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--service</code></td> <td>The name of the service. <br><br>This needs to be present in the digger.yml <code>services</code> section</td> <td>No</td></tr> <tr><td><code>--tag</code></td> <td>The tag of the image to be built - default to 'latest'</td> <td>No</td></tr> <tr><td><code>--aws-key</code></td> <td>The AWS key of the account that contains the ECR respository</td> <td>No</td></tr> <tr><td><code>--aws-secret</code></td> <td>The AWS secret of the account with ECR repository</td> <td>No</td></tr></tbody></table> <h2 id="dg-env-release-env-name"><a href="#dg-env-release-env-name" class="header-anchor">#</a> dg env release env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--service</code></td> <td>The name of the service. <br><br>This needs to be present in the digger.yml <code>services</code> section</td> <td>No</td></tr> <tr><td><code>--tag</code></td> <td>The tag of the image to be built - default to 'latest'</td> <td>No</td></tr> <tr><td><code>--aws-key</code></td> <td>The AWS key of the account that contains the ECR respository</td> <td>No</td></tr> <tr><td><code>--aws-secret</code></td> <td>The AWS secret of the account with ECR repository</td> <td>No</td></tr></tbody></table> <h2 id="dg-env-create-env-name"><a href="#dg-env-create-env-name" class="header-anchor">#</a> dg env create env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--target</code></td> <td>The repository which contains terraform template to apply. This argument should be of the form 'orgname/reponame@branch'</td> <td>No</td></tr> <tr><td><code>--region</code></td> <td>The AWS region to create the infrastructure in</td> <td>No</td></tr> <tr><td><code>--config</code></td> <td>a list of key=value pair to use for environment config options. You can specify multiple key=value pairs inline</td> <td>No</td></tr> <tr><td><code>--aws-key</code></td> <td>The AWS key of the account</td> <td>No</td></tr> <tr><td><code>--aws-secret</code></td> <td>The AWS secret of the account</td> <td>No</td></tr></tbody></table> <h2 id="dg-env-plan-env-name"><a href="#dg-env-plan-env-name" class="header-anchor">#</a> dg env plan env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Outputs the list of planned resource that will be created for this environment. It is highly recommended to run this command before each apply.</p> <h2 id="dg-env-apply-env-name"><a href="#dg-env-apply-env-name" class="header-anchor">#</a> dg env apply env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Applies the changes of the environment. Note: It is recommend to run a <code>dg plan</code> before <code>dg apply</code>.</p> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td><code>--verboose</code></td> <td>Stream the terraform output while running the command</td> <td>No</td></tr></tbody></table> <h2 id="dg-env-update-env-name"><a href="#dg-env-update-env-name" class="header-anchor">#</a> dg env update env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Update the settings of an environment. Currently supports updating of:</p> <ul><li>--target</li> <li>--config</li> <li>--aws-key</li> <li>--aws-secret</li></ul> <p>Usually will need to be followed by an <code>env apply</code> command</p> <h2 id="dg-env-destroy-env-name"><a href="#dg-env-destroy-env-name" class="header-anchor">#</a> dg env destroy env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Destroy an environment (Warning: will destroy all infrastructure create)</p> <h2 id="dg-env-describe-env-name"><a href="#dg-env-describe-env-name" class="header-anchor">#</a> dg env describe env_name</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>Print all the details of an existing environment including all terraform outputs (Warning verbose output).</p> <h2 id="dg-env-list"><a href="#dg-env-list" class="header-anchor">#</a> dg env list</h2> <ul><li>Requires Auth: yes</li> <li>Context: digger.yml</li></ul> <p>List all the existing environments, along with some details about them.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/customize/cicd.html" class="prev">
        CI/CD Integrations
      </a></span> <span class="next"><a href="/reference-yaml.html">
        digger.yml reference
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b07357c6.js" defer></script><script src="/assets/js/2.11174f41.js" defer></script><script src="/assets/js/20.bcf4e4cb.js" defer></script>
  </body>
</html>
