<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How It Works</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.17d6210f.css" as="style"><link rel="preload" href="/assets/js/app.5c120e84.js" as="script"><link rel="preload" href="/assets/js/2.8acb0036.js" as="script"><link rel="preload" href="/assets/js/18.53d96c8d.js" as="script"><link rel="prefetch" href="/assets/js/10.2783b794.js"><link rel="prefetch" href="/assets/js/11.50caeab4.js"><link rel="prefetch" href="/assets/js/12.1d05741e.js"><link rel="prefetch" href="/assets/js/13.d778fa74.js"><link rel="prefetch" href="/assets/js/14.a8b123d0.js"><link rel="prefetch" href="/assets/js/15.8655136f.js"><link rel="prefetch" href="/assets/js/16.4efc6bc1.js"><link rel="prefetch" href="/assets/js/17.ce01dea9.js"><link rel="prefetch" href="/assets/js/19.94866b45.js"><link rel="prefetch" href="/assets/js/20.c01d11fb.js"><link rel="prefetch" href="/assets/js/21.270f5232.js"><link rel="prefetch" href="/assets/js/3.3100e6eb.js"><link rel="prefetch" href="/assets/js/4.c971bf41.js"><link rel="prefetch" href="/assets/js/5.7d1c7360.js"><link rel="prefetch" href="/assets/js/6.be37e24c.js"><link rel="prefetch" href="/assets/js/7.dea5e977.js"><link rel="prefetch" href="/assets/js/8.f8fafb33.js"><link rel="prefetch" href="/assets/js/9.29b3ee5f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.17d6210f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/digger-logo-text.png" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/overview/concepts.html" class="sidebar-link">Concepts</a></li><li><a href="/overview/how-it-works.html" aria-current="page" class="active sidebar-link">How It Works</a></li><li><a href="/overview/digger-vs-other.html" class="sidebar-link">Digger vs Other</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CLI</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cli/installation.html" class="sidebar-link">Install Digger CLI</a></li><li><a href="/cli/node-express.html" class="sidebar-link">Deploy Node app with CLI</a></li><li><a href="/cli/django.html" class="sidebar-link">Deploy Django app with CLI</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Customize</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/customize/terraform.html" class="sidebar-link">Write your own Terraform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/terraform.html#terraform-overrides" class="sidebar-link">Terraform overrides</a></li><li class="sidebar-sub-header"><a href="/customize/terraform.html#custom-targets" class="sidebar-link">Custom Targets</a></li></ul></li><li><a href="/customize/cicd.html" class="sidebar-link">CI/CD Integrations</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/customize/cicd.html#github-actions" class="sidebar-link">Github Actions</a></li><li class="sidebar-sub-header"><a href="/customize/cicd.html#gitlab-ci" class="sidebar-link">GitLab CI</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reference-cli.html" class="sidebar-link">CLI reference</a></li><li><a href="/reference-yaml.html" class="sidebar-link">digger.yml reference</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/misc/tagging-and-rollbacks.html" class="sidebar-link">Image tagging rollbacks</a></li><li><a href="/misc/env-vars-build.html" class="sidebar-link">Environment variables During Build</a></li><li><a href="/misc/secrets.html" class="sidebar-link">Secrets</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/misc/secrets.html#lambda-secrets" class="sidebar-link">Lambda Secrets</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="how-it-works"><a href="#how-it-works" class="header-anchor">#</a> How It Works</h1> <p>Unlike traditional PaaS like Vercel or Heroku, Digger is not hosting your code on Digger servers. Instead, it manages your cloud account (AWS, GCP, Azure) through infrastructure-as-code. It generates Terraform (the industry standard DevOps tool) and runs it on Digger servers. Terraform in turn ensures that your stack is in the exact state it needs to be.</p> <p><strong>You can think of Digger as a &quot;compiler&quot; that takes the infrastructure needs of your applications and services as input and produces Terraform as output.</strong></p> <p>Generating IaC allows Digger to escape the &quot;curse of PaaS&quot; – inevitably teams need something that a simplified platform cannot provide. They start building more and more on AWS directly, and either lose all the PaaS benefits or end up recreating it in-house.</p> <p>With Digger, that will never happen – you have access to the full power of AWS from day 1 and can customise what you need when you need it. You can even build your infrastructure entirely by hand and still benefit from the centralised state management provided by Digger.</p> <h2 id="technical-design"><a href="#technical-design" class="header-anchor">#</a> Technical design</h2> <p>The problem with infrastructure-as-code today (Terraform, CloudFormation, CDK, Pulumi, etc) is that it is not reusable. That is because implementation, configuration and interface are mixed up together. There is no way to build something without thinking of the low-level implementation details. It's like an assembly language, that's why it is so hard.</p> <p>To address this, Digger introduces several new <a href="./concepts">Concepts</a>:</p> <ul><li><p><strong>Services</strong> (containers, functions, webapps) - your containers, functions, webapps - basically your application code that can be deployed somewhere and needs supporting infrastructure</p></li> <li><p><strong>Resources</strong> (databases, object storage, queues, etc) - infrastructure dependencies required by Services. For example, &quot;postgres 12 database&quot;.</p></li></ul> <p>Services and Resources form the <em>logical</em> structure of your stack. We call it &quot;infrastructure interface&quot; - what your code needs from the infrastructure</p> <ul><li><p><strong>Environments</strong> - isolated independent copies of your entire stack. Each Environment has Configuration that defines the specific <em>implementation</em> of infrastructure supporting your code. For example, your Dev environment could be a small EC2 box with docker-compose, and Production could run in a dedicated Kubernetes cluster with multi-AZ RDS. Services and Resources can be configured independently for each environment.</p></li> <li><p><strong>Targets</strong> - generic templates that generate specific implementation (Terraform) for each environment. Each Target can support a wide variety of stacks. More in <a href="#understanding-targets">Understanding Targets</a></p></li></ul> <p>Digger takes the logical structure of your stack, combines it with environment configuration, generates infrastructure-as-code and runs it on the backend, updating resources in your AWS account. It then exports generated Terraform into a designated repository of your choice. You can put your custom Terraform in there too and Digger will pick it up. So you can have it entirely your way if you'd like.</p> <p>Knowing the structure of your stack and the state of each environment allows Digger to do things that no other tool can do. Like zero-configuration CI or accurate cost prediction. Or even move from AWS to GCP or Azure in one click – all you need to do is create a new environment.</p> <h2 id="understanding-targets"><a href="#understanding-targets" class="header-anchor">#</a> Understanding Targets</h2> <p>Digger Targets are the templates for the infrastructure that Digger creates and manages in your AWS account. We had to come up with a new name because Terraform files are commonly referred to as &quot;templates&quot; - whereas Digger Targets <em>produce</em> Terraform, so they are &quot;templates of templates&quot; in a way.</p> <p>This extra layer is needed because Digger cleanly separates infrastructure implementation from configuration. A Target does not describe your infrastructure precisely - instead, it describes a particular architecture that can produce many possible variations for a wide variety of stacks, depending on configuration.</p> <div class="language- extra-class"><pre class="language-text"><code>Stack State + Target + Environment Config =&gt; Terraform for a particular environment
</code></pre></div><ul><li><strong>Stack State</strong> is the logical structure of your stack - apps, services, databases etc.</li> <li><strong>Environment Config</strong> is configuration specific to a particular environment.</li> <li><strong>Target</strong> takes Stack State and Environment Config and produces Terraform</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>If you are using Digger CLI or have connected Infrastructure Repository then you can find <strong>Stack State</strong> in the <code>digger.yml</code> file and <strong>Environment Config</strong> in the <code>digger.config.yml</code> file</p></div> <p>For example, let's say your stack is 1 webapp and 3 backend services using a Postgres database. Your production environment may run on a dedicated Kubernetes cluster and use a large multi-AZ RDS database. Whereas your dev environments may fit on a single EC2 instance with docker-compose to save on costs. The logical structure of every environment is the same, but the resulting Terraform template is different.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/overview/concepts.html" class="prev">
        Concepts
      </a></span> <span class="next"><a href="/overview/digger-vs-other.html">
        Digger vs Other
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c120e84.js" defer></script><script src="/assets/js/2.8acb0036.js" defer></script><script src="/assets/js/18.53d96c8d.js" defer></script>
  </body>
</html>
